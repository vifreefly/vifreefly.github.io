---
import { menuLinks, siteConfig } from "@/site.config";

const year = new Date().getFullYear();
---

<footer
	class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pt-20 pb-4 text-center align-top font-semibold text-gray-600 sm:flex-row sm:justify-between sm:text-xs dark:text-gray-400"
>
	<div class="me-0 sm:me-4">
		&copy; {siteConfig.author} {year}
	</div>
	<nav
		aria-labelledby="footer_links"
		class="flex gap-x-2 sm:gap-x-0 sm:divide-x sm:divide-gray-500"
	>
		<p id="footer_links" class="sr-only">More on this site</p>
		{
			menuLinks.map((link) => (
				<a class="hover:text-global-text px-4 py-2 hover:underline sm:py-0" href={link.path}>
					{link.title}
				</a>
			))
		}
		<button
			id="theme-toggle-footer"
			class="hover:text-global-text px-4 py-2 hover:underline sm:py-0 cursor-pointer"
			aria-label="Toggle theme"
		>
			<span class="theme-toggle-text">Light</span>
		</button>
	</nav>
</footer>

<script>
	const themeToggle = document.getElementById('theme-toggle-footer');
	const themeText = document.querySelector('.theme-toggle-text');

	function updateThemeText() {
		const currentTheme = document.documentElement.getAttribute('data-theme');
		if (themeText) {
			themeText.textContent = currentTheme === 'dark' ? 'Light' : 'Dark';
		}
	}

	// Initialize theme text
	updateThemeText();

	themeToggle?.addEventListener('click', () => {
		const root = document.documentElement;
		const currentTheme = root.getAttribute('data-theme');
		const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
		root.setAttribute('data-theme', newTheme);
		localStorage.setItem('theme', newTheme);
		updateThemeText();
	});
</script>
